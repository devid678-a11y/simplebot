# Настройка автоматической отправки уведомлений

## Варианты запуска

### 1. Через endpoint API (рекомендуется для Timeweb)
Вызовите endpoint `POST /api/notifications/send` периодически (например, через cron на Timeweb или внешний сервис).

Пример запроса:
```bash
curl -X POST https://devid678-a11y-simplebot-0a93.twc1.net/api/notifications/send
```

### 2. Через отдельный скрипт (для локального запуска или отдельного сервера)
Запустите скрипт `send-event-notifications.js` через cron:
```bash
# Каждый час проверяем мероприятия
0 * * * * cd /path/to/project && node send-event-notifications.js
```

### 3. Встроенный cron в Timeweb
Если Timeweb поддерживает cron задачи, добавьте задачу:
- Команда: `node send-event-notifications.js`
- Расписание: каждый час (`0 * * * *`)

## Логика работы

Скрипт:
1. Находит мероприятия, которые начинаются в ближайшие 24 часа
2. Для каждого мероприятия находит всех участников с `telegram_id`
3. Отправляет им уведомление в Telegram бота
4. Уведомление содержит название, дату, время, локацию и ссылку на мероприятие

## Что нужно проверить

1. ✅ Колонка `telegram_id` добавлена в таблицу `attendees`
2. ✅ При нажатии "Пойду" сохраняется `telegram_id` (если пользователь авторизован через Telegram)
3. ✅ Бот токен настроен в `server.js`
4. ⏳ Настроить автоматический запуск уведомлений (через cron или периодические запросы)

