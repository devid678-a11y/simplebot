// –¢–µ—Å—Ç YandexGPT –ø–∞—Ä—Å–µ—Ä–∞
const { parseTelegramMessage } = require('./index');

// –¢–µ—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
const testMessages = [
    {
        text: "üé¨ –ö–ò–ù–û–§–ï–°–¢–ò–í–ê–õ–¨ '–û–°–ï–ù–ù–ò–ô –≠–ö–†–ê–ù'\n\nüìÖ 10 —Å–µ–Ω—Ç—è–±—Ä—è, 20:00\nüìç –¶–∏—Ñ–µ—Ä–±–ª–∞—Ç, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, 12\nüí∞ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ\n\n–ü–æ–∫–∞–∑ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Ñ–∏–ª—å–º–æ–≤ –º–æ—Å–∫–æ–≤—Å–∫–∏—Ö —Ä–µ–∂–∏—Å—Å–µ—Ä–æ–≤. –û–±—Å—É–∂–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.",
        link: "https://t.me/ziferblatmost/1234"
    },
    {
        text: "üéµ –ö–û–ù–¶–ï–†–¢ '–î–ñ–ê–ó –í –ü–ê–†–ö–ï'\n\nüìÖ 11 —Å–µ–Ω—Ç—è–±—Ä—è, 19:00\nüìç –ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ, –ª–µ—Ç–Ω—è—è —Å—Ü–µ–Ω–∞\nüí∞ 500 —Ä—É–±–ª–µ–π\n\n–í—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ –º–æ—Å–∫–æ–≤—Å–∫–∏—Ö –¥–∂–∞–∑–æ–≤—ã—Ö –∫–æ–ª–ª–µ–∫—Ç–∏–≤–æ–≤ –ø–æ–¥ –æ—Ç–∫—Ä—ã—Ç—ã–º –Ω–µ–±–æ–º.",
        link: "https://t.me/only_park/5678"
    },
    {
        text: "–ù–æ–≤–æ—Å—Ç–∏ –ú–æ—Å–∫–≤—ã: —Å–µ–≥–æ–¥–Ω—è –≤ –≥–æ—Ä–æ–¥–µ –ø—Ä–æ—à–µ–ª —Ñ–µ—Å—Ç–∏–≤–∞–ª—å —É–ª–∏—á–Ω–æ–π –µ–¥—ã. –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –ø–æ—Å–µ—Ç–∏–ª–∏ —Ç—ã—Å—è—á–∏ –≥–æ—Ä–æ–∂–∞–Ω. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å –ø–æ–¥–æ–±–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ.",
        link: "https://t.me/NovostiMoskvbl/9999"
    },
    {
        text: "üé® –í–´–°–¢–ê–í–ö–ê '–°–û–í–†–ï–ú–ï–ù–ù–û–ï –ò–°–ö–£–°–°–¢–í–û –ú–û–°–ö–í–´'\n\nüìÖ 12 —Å–µ–Ω—Ç—è–±—Ä—è, 18:00\nüìç –ì–∞–ª–µ—Ä–µ—è '–ù–∞ –§–∞–Ω–µ—Ä–µ', —É–ª. –ê—Ä–±–∞—Ç, 15\nüí∞ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ\n\n–†–∞–±–æ—Ç—ã –º–æ–ª–æ–¥—ã—Ö –º–æ—Å–∫–æ–≤—Å–∫–∏—Ö —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤. –í—Å—Ç—Ä–µ—á–∞ —Å –∞–≤—Ç–æ—Ä–∞–º–∏.",
        link: "https://t.me/Na_Fanere/9012"
    },
    {
        text: "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? –ß—Ç–æ –ø–ª–∞–Ω–∏—Ä—É–µ—à—å –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ?",
        link: "https://t.me/random/123"
    }
];

async function testYandexGPT() {
    console.log('ü§ñ –¢–µ—Å—Ç–∏—Ä—É–µ–º YandexGPT –ø–∞—Ä—Å–µ—Ä...\n');
    
    for (let i = 0; i < testMessages.length; i++) {
        const message = testMessages[i];
        console.log(`--- –¢–µ—Å—Ç ${i + 1} ---`);
        console.log(`–°–æ–æ–±—â–µ–Ω–∏–µ: ${message.text.substring(0, 100)}...`);
        console.log(`–°—Å—ã–ª–∫–∞: ${message.link}\n`);
        
        try {
            const result = await parseTelegramMessage(message.text, message.link);
            
            if (result) {
                console.log('‚úÖ –°–æ–±—ã—Ç–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–æ:');
                console.log(`  –ù–∞–∑–≤–∞–Ω–∏–µ: ${result.title}`);
                console.log(`  –û–ø–∏—Å–∞–Ω–∏–µ: ${result.description}`);
                console.log(`  –î–∞—Ç–∞: ${result.date}`);
                console.log(`  –ú–µ—Å—Ç–æ: ${result.location}`);
                console.log(`  –¶–µ–Ω–∞: ${result.price || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}`);
                console.log(`  –ë–µ—Å–ø–ª–∞—Ç–Ω–æ: ${result.isFree ? '–î–∞' : '–ù–µ—Ç'}`);
                console.log(`  –û–Ω–ª–∞–π–Ω: ${result.isOnline ? '–î–∞' : '–ù–µ—Ç'}`);
                console.log(`  –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: ${result.categories.join(', ')}`);
                console.log(`  –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: ${result.confidence}`);
                console.log(`  Timestamp: ${result.startAtMillis}`);
            } else {
                console.log('‚ùå –°–æ–±—ã—Ç–∏–µ –Ω–µ –∏–∑–≤–ª–µ—á–µ–Ω–æ (–Ω–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö)');
            }
        } catch (error) {
            console.log('‚ùå –û—à–∏–±–∫–∞:', error.message);
        }
        
        console.log('\n' + '='.repeat(50) + '\n');
    }
}

testYandexGPT();

