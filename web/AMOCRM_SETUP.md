# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å AmoCRM

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. **–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ AmoCRM**

1. **–í–æ–π–¥–∏—Ç–µ –≤ –≤–∞—à AmoCRM –∞–∫–∫–∞—É–Ω—Ç**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://your-domain.amocrm.ru
   - –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É

2. **–°–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** ‚Üí **API**
   - –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é"**
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
     - **–ù–∞–∑–≤–∞–Ω–∏–µ**: "–°–∞–π—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è"
     - **–û–ø–∏—Å–∞–Ω–∏–µ**: "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∞–π—Ç–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–∏–¥–æ–≤"
     - **Redirect URI**: `https://dvizh-eacfa.web.app/amocrm-callback`

3. **–ü–æ–ª—É—á–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Client ID**
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Client Secret**
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ **Domain** (–≤–∞—à –¥–æ–º–µ–Ω AmoCRM)

### 2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `amocrm-config.js` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```javascript
const AmoCRMConfig = {
    domain: 'your-domain', // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
    clientId: 'YOUR_CLIENT_ID', // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ Client ID
    clientSecret: 'YOUR_CLIENT_SECRET', // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ Client Secret
    redirectUri: 'https://dvizh-eacfa.web.app/amocrm-callback',
    
    settings: {
        // –ü–æ–ª—É—á–∏—Ç–µ —ç—Ç–∏ ID –∏–∑ AmoCRM
        pipelineId: 123456, // ID –≤–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂
        statusId: 789012, // ID —Å—Ç–∞—Ç—É—Å–∞ "–ù–æ–≤—ã–π –ª–∏–¥"
        responsibleUserId: 345678, // ID –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
    }
};
```

### 3. **–ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø–æ–ª–µ–π –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫**

#### **–ü–æ–ª—É—á–µ–Ω–∏–µ ID –≤–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂:**
```javascript
// –í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ AmoCRM
fetch('https://your-domain.amocrm.ru/api/v4/leads/pipelines', {
    headers: { 'Authorization': 'Bearer YOUR_TOKEN' }
})
.then(r => r.json())
.then(data => console.log(data));
```

#### **–ü–æ–ª—É—á–µ–Ω–∏–µ ID —Å—Ç–∞—Ç—É—Å–æ–≤:**
```javascript
// –ü–æ–ª—É—á–∏—Ç–µ ID —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–ª—è –≤–∞—à–µ–π –≤–æ—Ä–æ–Ω–∫–∏
fetch('https://your-domain.amocrm.ru/api/v4/leads/pipelines/PIPELINE_ID', {
    headers: { 'Authorization': 'Bearer YOUR_TOKEN' }
})
.then(r => r.json())
.then(data => console.log(data));
```

#### **–ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
```javascript
// –ü–æ–ª—É—á–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
fetch('https://your-domain.amocrm.ru/api/v4/users', {
    headers: { 'Authorization': 'Bearer YOUR_TOKEN' }
})
.then(r => r.json())
.then(data => console.log(data));
```

#### **–ü–æ–ª—É—á–µ–Ω–∏–µ ID –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π:**
```javascript
// –ü–æ–ª—É—á–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π –ª–∏–¥–æ–≤
fetch('https://your-domain.amocrm.ru/api/v4/leads/custom_fields', {
    headers: { 'Authorization': 'Bearer YOUR_TOKEN' }
})
.then(r => r.json())
.then(data => console.log(data));
```

### 4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π –≤ amocrm-api.js**

–û–±–Ω–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `getFieldId()` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ ID –ø–æ–ª–µ–π:

```javascript
getFieldId(fieldName) {
    const fieldMapping = {
        'email': 123456, // ID –ø–æ–ª—è email
        'phone': 123457, // ID –ø–æ–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        'message': 123458, // ID –ø–æ–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è
        'source': 123459  // ID –ø–æ–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞
    };
    
    return fieldMapping[fieldName] || null;
}
```

### 5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**

1. **–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram:**
   - –ù–∞–ø–∏—à–∏—Ç–µ @BotFather –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
   - –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

2. **–ü–æ–ª—É—á–∏—Ç–µ Chat ID:**
   - –ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à–µ–º—É –±–æ—Ç—É
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ: `https://api.telegram.org/botYOUR_BOT_TOKEN/getUpdates`
   - –ù–∞–π–¥–∏—Ç–µ `chat.id` –≤ –æ—Ç–≤–µ—Ç–µ

3. **–û–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ oxem-header-script.js:**
```javascript
const botToken = 'YOUR_BOT_TOKEN'; // –í–∞—à —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
const chatId = 'YOUR_CHAT_ID'; // –í–∞—à chat ID
```

### 6. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ: `authorizeAmoCRM()`
   - –ü—Ä–æ–π–¥–∏—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–∞:**
```javascript
// –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
const testData = {
    name: '–¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤',
    email: 'test@example.com',
    phone: '+7 (999) 123-45-67',
    message: '–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ'
};

// –°–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–∞
amoCrmAPI.processWebsiteLead(testData)
.then(result => console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç:', result))
.catch(error => console.error('–û—à–∏–±–∫–∞:', error));
```

### 7. **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –≤ dist:**
```bash
Copy-Item "web\amocrm-config.js" "web\dist\amocrm-config.js" -Force
Copy-Item "web\amocrm-api.js" "web\dist\amocrm-api.js" -Force
```

2. **–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –Ω–∞ Firebase:**
```bash
firebase deploy --only hosting
```

### 8. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç: https://dvizh-eacfa.web.app
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–∞ –≤ AmoCRM
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram

## üîß **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏:**
- Google Analytics
- –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞
- Email —Ä–∞—Å—Å—ã–ª–∫–∏
- SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üìû **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ API –∫–ª—é—á–µ–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ AmoCRM
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ AmoCRM API

## üîó **–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏**

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è AmoCRM API](https://www.amocrm.ru/developers/content/crm_platform/api-reference)
- [OAuth 2.0 –≤ AmoCRM](https://www.amocrm.ru/developers/content/crm_platform/auth-api)
- [–ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π](https://github.com/amocrm/amocrm-api-js)
